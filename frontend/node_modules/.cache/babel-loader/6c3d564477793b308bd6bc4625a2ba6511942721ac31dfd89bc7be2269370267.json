{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rucha\\\\Life-Tag - Copy\\\\frontend\\\\src\\\\pages\\\\CloudRecordsPage.js\",\n  _s = $RefreshSig$();\n// src/pages/CloudRecordsPage.js\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport apiClient from \"../api\";\nimport { useAuth } from \"../components/context/AuthContext\";\nimport ConfirmationModal from \"../components/ConfirmationModal\";\nimport \"../components/PatientRecords.css\"; // Reuse styles\nimport \"./PageWrapper.css\"; // For page header\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CloudRecordsPage = () => {\n  _s();\n  const [localRecords, setLocalRecords] = useState([]);\n  const [cloudRecords, setCloudRecords] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [actionLoading, setActionLoading] = useState(null); // For Add/Delete buttons\n  const {\n    auth\n  } = useAuth();\n\n  // State for confirmation modal\n  const [modalState, setModalState] = useState({\n    isOpen: false,\n    recordId: null,\n    action: null,\n    // 'backup' or 'delete'\n    title: \"\",\n    message: \"\"\n  });\n\n  // Function to fetch records\n  const fetchRecords = useCallback(async () => {\n    if (!(auth !== null && auth !== void 0 && auth.token)) {\n      if (loading) setLoading(false);\n      setError(\"User not authenticated.\");\n      return;\n    }\n    // Only set full loading on initial load\n    if (!localRecords.length && !cloudRecords.length) {\n      setLoading(true);\n    }\n    try {\n      const response = await apiClient.get(\"/records/patient\", {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      });\n      // Filter records based on s3Key presence\n      const local = response.data.filter(rec => !rec.s3Key);\n      const cloud = response.data.filter(rec => rec.s3Key);\n      setLocalRecords(local);\n      setCloudRecords(cloud);\n      setError(null); // Clear errors on success\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Error fetching patient records:\", err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to fetch records.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [auth, loading, localRecords.length, cloudRecords.length]); // Dependencies\n\n  // Fetch records on load and set up polling\n  useEffect(() => {\n    fetchRecords();\n    const intervalId = setInterval(fetchRecords, 7000); // Poll every 7 seconds\n    return () => clearInterval(intervalId);\n  }, [fetchRecords]);\n\n  // --- Modal Handling ---\n  const openConfirmation = (recordId, action, title, message) => {\n    setModalState({\n      isOpen: true,\n      recordId,\n      action,\n      title,\n      message\n    });\n  };\n  const closeModal = () => {\n    setModalState({\n      isOpen: false,\n      recordId: null,\n      action: null,\n      title: \"\",\n      message: \"\"\n    });\n  };\n\n  // --- API Action Handler ---\n  const handleConfirmAction = async () => {\n    const {\n      recordId,\n      action\n    } = modalState;\n    if (!recordId || !action) return;\n    setActionLoading(recordId); // Show loading on the specific item\n    setError(null);\n    closeModal();\n    try {\n      if (action === \"backup\") {\n        // Call the backup API\n        await apiClient.post(`/records/backup/${recordId}`, {}, {\n          // Empty body\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        });\n      } else if (action === \"delete\") {\n        // Call the delete API\n        await apiClient.delete(`/records/cloud/${recordId}`, {\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        });\n      }\n      // Success! Fetch the updated list immediately\n      fetchRecords();\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(`Error ${action}ing record ${recordId}:`, err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || `Failed to ${action} record.`);\n    } finally {\n      setActionLoading(null); // Stop loading indicator\n    }\n  };\n\n  // --- Render Logic ---\n  if (loading && !localRecords.length && !cloudRecords.length) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#FFF'\n      },\n      children: \"Loading records...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"page-header\",\n        children: \"Ready for Cloud Backup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), error && actionLoading === null && !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        style: {\n          color: '#FFF'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 57\n      }, this), localRecords.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#EEE',\n          textAlign: 'center'\n        },\n        children: \"No local records waiting for backup.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"records-list\",\n        children: [\" \", localRecords.map(record => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"record-item\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-icon\",\n            children: \"\\uD83D\\uDCC4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 18\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: record.fileName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Type: \", record.recordType || 'N/A']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Uploaded by: \", record.doctor ? `Dr. ${record.doctor.fullName}` : 'You']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-date\",\n            children: new Date(record.createdAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button backup\" // Use backup class\n            ,\n            onClick: () => openConfirmation(record.id, 'backup', 'Confirm Backup', `Add \"${record.fileName}\" to cloud storage?`),\n            disabled: actionLoading === record.id,\n            children: actionLoading === record.id ? 'Adding...' : 'Add to Cloud'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 18\n          }, this)]\n        }, record.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        border: 'none',\n        borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n        margin: '3rem 0'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"page-header\",\n        children: \"Records in Cloud\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), cloudRecords.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#EEE',\n          textAlign: 'center'\n        },\n        children: \"No records currently stored in the cloud.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"records-list\",\n        children: [\" \", cloudRecords.map(record =>\n        /*#__PURE__*/\n        // Make cloud records clickable to view\n        _jsxDEV(\"div\", {\n          className: \"record-item clickable\"\n          // onClick={() => setSelectedRecord(record)} // Add this if you want view functionality here too\n          ,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-icon\",\n            children: \"\\u2601\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 18\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: record.fileName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Type: \", record.recordType || 'N/A']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 20\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Uploaded by: \", record.doctor ? `Dr. ${record.doctor.fullName}` : 'You']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 20\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"record-date\",\n            children: new Date(record.createdAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"action-button reject\" // Use reject style (red)\n            ,\n            onClick: e => {\n              e.stopPropagation();\n              openConfirmation(record.id, 'delete', 'Confirm Deletion', `Permanently delete \"${record.fileName}\" from cloud? This cannot be undone.`);\n            },\n            disabled: actionLoading === record.id,\n            children: actionLoading === record.id ? 'Deleting...' : 'Delete'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 18\n          }, this)]\n        }, record.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationModal, {\n      isOpen: modalState.isOpen,\n      onClose: closeModal,\n      onConfirm: handleConfirmAction,\n      title: modalState.title,\n      message: modalState.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this) // End page-wrapper\n  ;\n}; // End CloudRecordsPage component\n_s(CloudRecordsPage, \"jhwcLYN4CDeQ0HZF/w9hDzG7OGc=\", false, function () {\n  return [useAuth];\n});\n_c = CloudRecordsPage;\nexport default CloudRecordsPage;\nvar _c;\n$RefreshReg$(_c, \"CloudRecordsPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","apiClient","useAuth","ConfirmationModal","jsxDEV","_jsxDEV","CloudRecordsPage","_s","localRecords","setLocalRecords","cloudRecords","setCloudRecords","error","setError","loading","setLoading","actionLoading","setActionLoading","auth","modalState","setModalState","isOpen","recordId","action","title","message","fetchRecords","token","length","response","get","headers","Authorization","local","data","filter","rec","s3Key","cloud","err","_err$response","_err$response$data","console","intervalId","setInterval","clearInterval","openConfirmation","closeModal","handleConfirmAction","post","delete","_err$response2","_err$response2$data","style","color","children","fileName","_jsxFileName","lineNumber","columnNumber","className","textAlign","map","record","recordType","doctor","fullName","Date","createdAt","toLocaleDateString","onClick","id","disabled","border","borderTop","margin","e","stopPropagation","onClose","onConfirm","_c","$RefreshReg$"],"sources":["C:/Users/rucha/Life-Tag - Copy/frontend/src/pages/CloudRecordsPage.js"],"sourcesContent":["// src/pages/CloudRecordsPage.js\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport apiClient from \"../api\";\r\nimport { useAuth } from \"../components/context/AuthContext\";\r\nimport ConfirmationModal from \"../components/ConfirmationModal\";\r\nimport \"../components/PatientRecords.css\"; // Reuse styles\r\nimport \"./PageWrapper.css\"; // For page header\r\n\r\nconst CloudRecordsPage = () => {\r\n  const [localRecords, setLocalRecords] = useState([]);\r\n  const [cloudRecords, setCloudRecords] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [actionLoading, setActionLoading] = useState(null); // For Add/Delete buttons\r\n  const { auth } = useAuth();\r\n\r\n  // State for confirmation modal\r\n  const [modalState, setModalState] = useState({\r\n    isOpen: false,\r\n    recordId: null,\r\n    action: null, // 'backup' or 'delete'\r\n    title: \"\",\r\n    message: \"\",\r\n  });\r\n\r\n  // Function to fetch records\r\n  const fetchRecords = useCallback(async () => {\r\n    if (!auth?.token) {\r\n      if (loading) setLoading(false);\r\n      setError(\"User not authenticated.\");\r\n      return;\r\n    }\r\n    // Only set full loading on initial load\r\n    if (!localRecords.length && !cloudRecords.length) {\r\n      setLoading(true);\r\n    }\r\n\r\n    try {\r\n      const response = await apiClient.get(\"/records/patient\", {\r\n        headers: { Authorization: `Bearer ${auth.token}` },\r\n      });\r\n      // Filter records based on s3Key presence\r\n      const local = response.data.filter((rec) => !rec.s3Key);\r\n      const cloud = response.data.filter((rec) => rec.s3Key);\r\n      setLocalRecords(local);\r\n      setCloudRecords(cloud);\r\n      setError(null); // Clear errors on success\r\n    } catch (err) {\r\n      console.error(\"Error fetching patient records:\", err);\r\n      setError(err.response?.data?.message || \"Failed to fetch records.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [auth, loading, localRecords.length, cloudRecords.length]); // Dependencies\r\n\r\n  // Fetch records on load and set up polling\r\n  useEffect(() => {\r\n    fetchRecords();\r\n    const intervalId = setInterval(fetchRecords, 7000); // Poll every 7 seconds\r\n    return () => clearInterval(intervalId);\r\n  }, [fetchRecords]);\r\n\r\n  // --- Modal Handling ---\r\n  const openConfirmation = (recordId, action, title, message) => {\r\n    setModalState({ isOpen: true, recordId, action, title, message });\r\n  };\r\n  const closeModal = () => {\r\n    setModalState({\r\n      isOpen: false,\r\n      recordId: null,\r\n      action: null,\r\n      title: \"\",\r\n      message: \"\",\r\n    });\r\n  };\r\n\r\n  // --- API Action Handler ---\r\n  const handleConfirmAction = async () => {\r\n    const { recordId, action } = modalState;\r\n    if (!recordId || !action) return;\r\n\r\n    setActionLoading(recordId); // Show loading on the specific item\r\n    setError(null);\r\n    closeModal();\r\n\r\n    try {\r\n      if (action === \"backup\") {\r\n        // Call the backup API\r\n        await apiClient.post(\r\n          `/records/backup/${recordId}`,\r\n          {},\r\n          {\r\n            // Empty body\r\n            headers: { Authorization: `Bearer ${auth.token}` },\r\n          }\r\n        );\r\n      } else if (action === \"delete\") {\r\n        // Call the delete API\r\n        await apiClient.delete(`/records/cloud/${recordId}`, {\r\n          headers: { Authorization: `Bearer ${auth.token}` },\r\n        });\r\n      }\r\n      // Success! Fetch the updated list immediately\r\n      fetchRecords();\r\n    } catch (err) {\r\n      console.error(`Error ${action}ing record ${recordId}:`, err);\r\n      setError(err.response?.data?.message || `Failed to ${action} record.`);\r\n    } finally {\r\n      setActionLoading(null); // Stop loading indicator\r\n    }\r\n  };\r\n\r\n  // --- Render Logic ---\r\n  if (loading && !localRecords.length && !cloudRecords.length) {\r\n    return <p style={{ color: '#FFF' }}>Loading records...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-wrapper\"> {/* Keep the main page wrapper */}\r\n      \r\n      {/* --- Section 1: Records Ready for Backup --- */}\r\n      <div> {/* Use a simple div, no card */}\r\n        {/* Use the standard page header style */}\r\n        <h2 className=\"page-header\">Ready for Cloud Backup</h2> \r\n\r\n        {/* Display overall error only once if needed */}\r\n        {error && actionLoading === null && !loading && <p className=\"error-message\" style={{color: '#FFF'}}>{error}</p>}\r\n\r\n        {localRecords.length === 0 ? (\r\n          <p style={{color: '#EEE', textAlign: 'center'}}>No local records waiting for backup.</p>\r\n        ) : (\r\n          <div className=\"records-list\"> {/* Reuse the existing list class */}\r\n            {localRecords.map((record) => (\r\n              <div key={record.id} className=\"record-item\"> {/* Standard record item */}\r\n                 <div className=\"record-icon\">üìÑ</div> {/* Document Icon */}\r\n                 <div className=\"record-details\">\r\n                   <strong>{record.fileName}</strong>\r\n                   <span>Type: {record.recordType || 'N/A'}</span>\r\n                   <span>Uploaded by: {record.doctor ? `Dr. ${record.doctor.fullName}`: 'You'}</span>\r\n                 </div>\r\n                 <div className=\"record-date\">\r\n                   {new Date(record.createdAt).toLocaleDateString()}\r\n                 </div>\r\n                 {/* Backup Button */}\r\n                 <button\r\n                    className=\"action-button backup\" // Use backup class\r\n                    onClick={() => openConfirmation(record.id, 'backup', 'Confirm Backup', `Add \"${record.fileName}\" to cloud storage?`)}\r\n                    disabled={actionLoading === record.id}\r\n                 >\r\n                    {actionLoading === record.id ? 'Adding...' : 'Add to Cloud'}\r\n                 </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* --- Add Spacing Between Sections --- */}\r\n      <hr style={{ border: 'none', borderTop: '1px solid rgba(255, 255, 255, 0.1)', margin: '3rem 0' }} />\r\n\r\n      {/* --- Section 2: Records Already in Cloud --- */}\r\n      <div> {/* Use a simple div, no card */}\r\n        {/* Use the standard page header style */}\r\n        <h2 className=\"page-header\">Records in Cloud</h2>\r\n\r\n        {cloudRecords.length === 0 ? (\r\n          <p style={{color: '#EEE', textAlign: 'center'}}>No records currently stored in the cloud.</p>\r\n        ) : (\r\n          <div className=\"records-list\"> {/* Reuse the existing list class */}\r\n            {cloudRecords.map((record) => (\r\n              // Make cloud records clickable to view\r\n              <div \r\n                key={record.id} \r\n                className=\"record-item clickable\" \r\n                // onClick={() => setSelectedRecord(record)} // Add this if you want view functionality here too\r\n              > \r\n                 <div className=\"record-icon\">‚òÅÔ∏è</div> {/* Cloud Icon */}\r\n                 <div className=\"record-details\">\r\n                   <strong>{record.fileName}</strong>\r\n                   <span>Type: {record.recordType || 'N/A'}</span>\r\n                   <span>Uploaded by: {record.doctor ? `Dr. ${record.doctor.fullName}`: 'You'}</span>\r\n                 </div>\r\n                 <div className=\"record-date\">\r\n                   {new Date(record.createdAt).toLocaleDateString()}\r\n                 </div>\r\n                 {/* Delete Button */}\r\n                 <button\r\n                    className=\"action-button reject\" // Use reject style (red)\r\n                    onClick={(e) => {\r\n                        e.stopPropagation(); \r\n                        openConfirmation(record.id, 'delete', 'Confirm Deletion', `Permanently delete \"${record.fileName}\" from cloud? This cannot be undone.`);\r\n                    }}\r\n                    disabled={actionLoading === record.id}\r\n                 >\r\n                    {actionLoading === record.id ? 'Deleting...' : 'Delete'}\r\n                 </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Render the confirmation modal (remains the same) */}\r\n      <ConfirmationModal\r\n        isOpen={modalState.isOpen}\r\n        onClose={closeModal}\r\n        onConfirm={handleConfirmAction}\r\n        title={modalState.title}\r\n        message={modalState.message}\r\n      />\r\n\r\n      {/* Render the File Viewer Modal if needed (add selectedRecord state back if you enable clicks) */}\r\n      {/* {selectedRecord && (\r\n        <FileViewerModal \r\n          record={selectedRecord} \r\n          onClose={() => setSelectedRecord(null)}\r\n          isReadOnly={false} // Patient has full access\r\n        />\r\n      )} */}\r\n    </div> // End page-wrapper\r\n  );\r\n}; // End CloudRecordsPage component\r\n\r\nexport default CloudRecordsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}